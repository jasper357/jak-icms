data_dir: /var/lib/vector

sources:
  demo_logs:
    type: demo_logs
    format: json
    interval: 1

transforms:
  normalize:
    type: remap
    inputs:
      - demo_logs
    source: |
      .pipeline = "vector-demo"
      .ingested_at = now()

sinks:
  console:
    type: console
    inputs:
      - normalize
    encoding:
      codec: json

  redpanda:
    type: kafka
    inputs:
      - normalize
    bootstrap_servers: "${REDPANDA_BROKERS:-redpanda:9092}"
    topic: "${REDPANDA_TOPIC_VECTOR:-vector.logs}"
    encoding:
      codec: json
